{"ast":null,"code":"import'./Streamlit_mathlive.css';import React from'react';import{Streamlit,StreamlitComponentBase,withStreamlitConnection}from\"streamlit-component-lib\";// Use &#123; and &#125; to escape { and } in JSX\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class Streamlit_mathlive extends StreamlitComponentBase{constructor(props){super(props);this.change_val=evt=>{this.setState({value:evt.target.value,tex:this.state.upright?\"\\\\mathrm{\"+evt.target.value+\"}\":evt.target.value,mathml:window.MathJax.tex2mml(this.state.upright?\"\\\\mathrm{\"+evt.target.value+\"}\":evt.target.value,{em:14,ex:7,display:true})},()=>Streamlit.setComponentValue([this.state.tex,this.state.mathml]));//        this.setState(\n//   { value: evt.target.value, tex: this.state.upright ? \"\\\\mathrm{\" + evt.target.value + \"}\" : evt.target.value  , mathml: window.MathJax.startup.toMML(this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\" : this.state.value)},\n//   () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\n// )\nthis.mf.current.value=this.state.value;if(typeof window.MathJax!==\"undefined\"){window.MathJax.typesetClear();window.MathJax.typeset();}};this.handle_check=()=>{this.setState({tex:this.state.upright?\"\\\\mathrm{\"+this.state.value+\"}\":this.state.value,mathml:window.MathJax.tex2mml(this.state.upright?\"\\\\mathrm{\"+this.state.value+\"}\":this.state.value,{em:14,ex:7,display:true})},()=>Streamlit.setComponentValue([this.state.tex,this.state.mathml]));//   \tthis.setState(\n//   {tex: this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\": this.state.value , mathml: window.MathJax.startup.toMML(this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\" : this.state.value)},\n//   () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\n// )\n};this.mf=/*#__PURE__*/React.createRef();this.state={upright:this.props.args['upright'],value:this.props.args['value'],tex:this.props.args['value'],mathml:window.MathJax.tex2mml(this.props.args['value'],{em:14,ex:7,display:true,enableEnrichment:true})};// this.state = {upright:this.props.args['upright'], value:this.props.args['value'],tex:this.props.args['value'],mathml: window.MathJax.startup.toMML(this.props.args['value'])}\nif(this.props.args['edit']){Streamlit.setComponentValue([this.state.tex,this.state.mathml]);}this.edit=this.props.args['edit'];Streamlit.setFrameHeight();}//   static getDerivedStateFromProps(props, state) {\n//   return {value: props.args[\"value\"]};\n// }\n// const theme = renderData.theme\n// const style = {}\n//\n// // Maintain compatibility with older versions of Streamlit that don't send\n// // a theme object.\n// if (theme) {\n//   // Use the theme object to style our button border. Alternatively, the\n//   // theme style is defined in CSS vars.\n//   const borderStyling = `1px solid ${isFocused ? theme.primaryColor : \"gray\"}`\n//   style.border = borderStyling\n//   style.outline = borderStyling\n// }\n// Customize the mathfield when it is mounted\ncomponentDidMount(){// Read more about customizing the mathfield: https://cortexjs.io/mathlive/guides/customizing/\nif(this.props.args['edit']){this.mf.current.smartFence=true;this.mf.current.mathVirtualKeyboardPolicy=\"sandboxed\";window.mathVirtualKeyboard.visible=true;// This could be an `onInput` handler, but this is an alternative\nthis.mf.current.addEventListener('input',evt=>{// When the return key is pressed, play a sound\nif(evt.inputType==='insertLineBreak'){// The mathfield is available as `evt.target`\n// The mathfield can be controlled with `executeCommand`\n// Read more: https://cortexjs.io/mathlive/guides/commands/\nevt.target.executeCommand('plonk');}});}}render(){if(this.props.args['edit']){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h2\",{children:this.props.args['title']}),/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"col text-center\",children:[/*#__PURE__*/_jsx(\"math-field\",{ref:this.mf,onInput:evt=>{this.change_val(evt);},children:this.state.value}),/*#__PURE__*/_jsxs(\"div\",{class:\"form-check d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"input\",{class:\"form-check-input\",type:\"checkbox\",onChange:()=>{this.setState({upright:!this.state.upright});},checked:this.state.upright,id:\"upright1\"}),/*#__PURE__*/_jsx(\"label\",{class:\"form-check-label\",for:\"upright1\",children:\"Upright equation\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"h-20 p-2 bg-body-tertiary border rounded-3\",children:this.state.tex})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"col text-center\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Render preview of MathML\"}),/*#__PURE__*/_jsx(\"h4\",{class:\"h-80 p-2 bg-body-tertiary border rounded-3\",dangerouslySetInnerHTML:{__html:this.state.mathml}})]})]})}),/*#__PURE__*/_jsx(\"break\",{})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}}}export default withStreamlitConnection(Streamlit_mathlive);","map":{"version":3,"names":["React","Streamlit","StreamlitComponentBase","withStreamlitConnection","jsx","_jsx","jsxs","_jsxs","Streamlit_mathlive","constructor","props","change_val","evt","setState","value","target","tex","state","upright","mathml","window","MathJax","tex2mml","em","ex","display","setComponentValue","mf","current","typesetClear","typeset","handle_check","createRef","args","enableEnrichment","edit","setFrameHeight","componentDidMount","smartFence","mathVirtualKeyboardPolicy","mathVirtualKeyboard","visible","addEventListener","inputType","executeCommand","render","className","children","class","ref","onInput","type","onChange","checked","id","for","dangerouslySetInnerHTML","__html"],"sources":["C:/Users/sinag/PycharmProjects/Protoeqn/Streamlit_mathlive/frontend/src/Streamlit_mathlive.js"],"sourcesContent":["import './Streamlit_mathlive.css'\r\nimport React from 'react'\r\nimport { Streamlit, StreamlitComponentBase, withStreamlitConnection } from \"streamlit-component-lib\"\r\n\r\n\r\n// Use &#123; and &#125; to escape { and } in JSX\r\n\r\nclass Streamlit_mathlive extends StreamlitComponentBase {\r\n  \r\n  constructor(props) {\r\n    super(props)\r\n    this.mf = React.createRef()\r\n    this.state = {upright:this.props.args['upright'], value:this.props.args['value'],tex:this.props.args['value'], mathml:window.MathJax.tex2mml(this.props.args['value'],{em: 14, ex: 7, display: true, enableEnrichment: true})}\r\n\t// this.state = {upright:this.props.args['upright'], value:this.props.args['value'],tex:this.props.args['value'],mathml: window.MathJax.startup.toMML(this.props.args['value'])}\r\n    if (this.props.args['edit']){\r\n\tStreamlit.setComponentValue([this.state.tex,this.state.mathml])}\r\n\tthis.edit = this.props.args['edit']\r\n\tStreamlit.setFrameHeight()\r\n  }\r\n\r\n  //   static getDerivedStateFromProps(props, state) {\r\n  //   return {value: props.args[\"value\"]};\r\n  // }\r\n\r\n  // const theme = renderData.theme\r\n  // const style = {}\r\n  //\r\n  // // Maintain compatibility with older versions of Streamlit that don't send\r\n  // // a theme object.\r\n  // if (theme) {\r\n  //   // Use the theme object to style our button border. Alternatively, the\r\n  //   // theme style is defined in CSS vars.\r\n  //   const borderStyling = `1px solid ${isFocused ? theme.primaryColor : \"gray\"}`\r\n  //   style.border = borderStyling\r\n  //   style.outline = borderStyling\r\n  // }\r\n\r\n  // Customize the mathfield when it is mounted\r\n\r\n  componentDidMount(){\r\n    // Read more about customizing the mathfield: https://cortexjs.io/mathlive/guides/customizing/\r\n\tif (this.props.args['edit']) {\r\n\t\tthis.mf.current.smartFence = true\r\n\t\tthis.mf.current.mathVirtualKeyboardPolicy = \"sandboxed\";\r\n\t\twindow.mathVirtualKeyboard.visible = true;\r\n\t\t// This could be an `onInput` handler, but this is an alternative\r\n\t\tthis.mf.current.addEventListener('input', (evt) => {\r\n\t\t  // When the return key is pressed, play a sound\r\n\t\t  if (evt.inputType === 'insertLineBreak') {\r\n\t\t\t// The mathfield is available as `evt.target`\r\n\t\t\t// The mathfield can be controlled with `executeCommand`\r\n\t\t\t// Read more: https://cortexjs.io/mathlive/guides/commands/\r\n\t\t\tevt.target.executeCommand('plonk')\r\n\t\t  }\r\n\t\t})\r\n     }\r\n  }\r\n\r\n  change_val = (evt) => {\r\n     this.setState(\r\n      { value: evt.target.value, tex: this.state.upright ? \"\\\\mathrm{\" + evt.target.value + \"}\" : evt.target.value  , mathml: window.MathJax.tex2mml(this.state.upright ? \"\\\\mathrm{\" + evt.target.value + \"}\" : evt.target.value,{em: 14, ex: 7, display: true})},\r\n      () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\r\n    )\r\n\t//        this.setState(\r\n    //   { value: evt.target.value, tex: this.state.upright ? \"\\\\mathrm{\" + evt.target.value + \"}\" : evt.target.value  , mathml: window.MathJax.startup.toMML(this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\" : this.state.value)},\r\n    //   () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\r\n    // )\r\n    this.mf.current.value = this.state.value\r\n\r\n    if(typeof window.MathJax !== \"undefined\"){\r\n\t    window.MathJax.typesetClear()\r\n      window.MathJax.typeset()\r\n    }\r\n  }\r\n  \r\n  handle_check = () => {\r\n\tthis.setState(\r\n      {tex: this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\": this.state.value , mathml: window.MathJax.tex2mml(this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\" : this.state.value ,{em: 14, ex: 7, display: true})},\r\n      () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\r\n    )\r\n\t//   \tthis.setState(\r\n    //   {tex: this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\": this.state.value , mathml: window.MathJax.startup.toMML(this.state.upright ? \"\\\\mathrm{\" + this.state.value + \"}\" : this.state.value)},\r\n    //   () => Streamlit.setComponentValue([this.state.tex,this.state.mathml])\r\n    // )\r\n  }\r\n  \r\n\t\r\n  render() {\r\n\tif (this.props.args['edit']) {\r\n    return (\r\n      <div className='App'>\r\n        <h2>{this.props.args['title']}</h2>\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"row\" >\r\n\t\t\t\t<div class=\"col text-center\">\r\n\t\t\t\t\t<math-field ref={this.mf} onInput={(evt) => {this.change_val(evt)}}>\r\n\t\t\t\t\t  {this.state.value}\r\n\t\t\t\t\t</math-field>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<div class=\"form-check d-flex justify-content-center\">\r\n\t\t\t\t\t  <input class=\"form-check-input\" type=\"checkbox\" onChange={()=> {this.setState({upright:!this.state.upright})}} checked={this.state.upright} id=\"upright1\"/>\r\n\t\t\t\t\t  <label class=\"form-check-label\" for=\"upright1\">\r\n\t\t\t\t\t\tUpright equation\r\n\t\t\t\t\t  </label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"h-20 p-2 bg-body-tertiary border rounded-3\">{this.state.tex}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"col text-center\">\r\n\t\t\t\t\t<h5>Render preview of MathML</h5>\r\n\t\t\t\t\t<h4 class=\"h-80 p-2 bg-body-tertiary border rounded-3\" dangerouslySetInnerHTML={{ __html: this.state.mathml }} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<break/>\r\n      </div>\r\n    )\r\n  } else {\r\n\t  return(<div></div>)\r\n  }\r\n  }\r\n}\r\n\r\nexport default withStreamlitConnection(Streamlit_mathlive)\r\n"],"mappings":"AAAA,MAAO,0BAA0B,CACjC,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,sBAAsB,CAAEC,uBAAuB,KAAQ,yBAAyB,CAGpG;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEA,KAAM,CAAAC,kBAAkB,QAAS,CAAAN,sBAAuB,CAEtDO,WAAWA,CAACC,KAAK,CAAE,CACjB,KAAK,CAACA,KAAK,CAAC,MAgDdC,UAAU,CAAIC,GAAG,EAAK,CACnB,IAAI,CAACC,QAAQ,CACZ,CAAEC,KAAK,CAAEF,GAAG,CAACG,MAAM,CAACD,KAAK,CAAEE,GAAG,CAAE,IAAI,CAACC,KAAK,CAACC,OAAO,CAAG,WAAW,CAAGN,GAAG,CAACG,MAAM,CAACD,KAAK,CAAG,GAAG,CAAGF,GAAG,CAACG,MAAM,CAACD,KAAK,CAAIK,MAAM,CAAEC,MAAM,CAACC,OAAO,CAACC,OAAO,CAAC,IAAI,CAACL,KAAK,CAACC,OAAO,CAAG,WAAW,CAAGN,GAAG,CAACG,MAAM,CAACD,KAAK,CAAG,GAAG,CAAGF,GAAG,CAACG,MAAM,CAACD,KAAK,CAAC,CAACS,EAAE,CAAE,EAAE,CAAEC,EAAE,CAAE,CAAC,CAAEC,OAAO,CAAE,IAAI,CAAC,CAAC,CAAC,CAC5P,IAAMxB,SAAS,CAACyB,iBAAiB,CAAC,CAAC,IAAI,CAACT,KAAK,CAACD,GAAG,CAAC,IAAI,CAACC,KAAK,CAACE,MAAM,CAAC,CACtE,CAAC,CACJ;AACG;AACA;AACA;AACA,IAAI,CAACQ,EAAE,CAACC,OAAO,CAACd,KAAK,CAAG,IAAI,CAACG,KAAK,CAACH,KAAK,CAExC,GAAG,MAAO,CAAAM,MAAM,CAACC,OAAO,GAAK,WAAW,CAAC,CACxCD,MAAM,CAACC,OAAO,CAACQ,YAAY,CAAC,CAAC,CAC5BT,MAAM,CAACC,OAAO,CAACS,OAAO,CAAC,CAAC,CAC1B,CACF,CAAC,MAEDC,YAAY,CAAG,IAAM,CACtB,IAAI,CAAClB,QAAQ,CACR,CAACG,GAAG,CAAE,IAAI,CAACC,KAAK,CAACC,OAAO,CAAG,WAAW,CAAG,IAAI,CAACD,KAAK,CAACH,KAAK,CAAG,GAAG,CAAE,IAAI,CAACG,KAAK,CAACH,KAAK,CAAGK,MAAM,CAAEC,MAAM,CAACC,OAAO,CAACC,OAAO,CAAC,IAAI,CAACL,KAAK,CAACC,OAAO,CAAG,WAAW,CAAG,IAAI,CAACD,KAAK,CAACH,KAAK,CAAG,GAAG,CAAG,IAAI,CAACG,KAAK,CAACH,KAAK,CAAE,CAACS,EAAE,CAAE,EAAE,CAAEC,EAAE,CAAE,CAAC,CAAEC,OAAO,CAAE,IAAI,CAAC,CAAC,CAAC,CACjO,IAAMxB,SAAS,CAACyB,iBAAiB,CAAC,CAAC,IAAI,CAACT,KAAK,CAACD,GAAG,CAAC,IAAI,CAACC,KAAK,CAACE,MAAM,CAAC,CACtE,CAAC,CACJ;AACG;AACA;AACA;AACF,CAAC,CAzEC,IAAI,CAACQ,EAAE,cAAG3B,KAAK,CAACgC,SAAS,CAAC,CAAC,CAC3B,IAAI,CAACf,KAAK,CAAG,CAACC,OAAO,CAAC,IAAI,CAACR,KAAK,CAACuB,IAAI,CAAC,SAAS,CAAC,CAAEnB,KAAK,CAAC,IAAI,CAACJ,KAAK,CAACuB,IAAI,CAAC,OAAO,CAAC,CAACjB,GAAG,CAAC,IAAI,CAACN,KAAK,CAACuB,IAAI,CAAC,OAAO,CAAC,CAAEd,MAAM,CAACC,MAAM,CAACC,OAAO,CAACC,OAAO,CAAC,IAAI,CAACZ,KAAK,CAACuB,IAAI,CAAC,OAAO,CAAC,CAAC,CAACV,EAAE,CAAE,EAAE,CAAEC,EAAE,CAAE,CAAC,CAAEC,OAAO,CAAE,IAAI,CAAES,gBAAgB,CAAE,IAAI,CAAC,CAAC,CAAC,CACjO;AACG,GAAI,IAAI,CAACxB,KAAK,CAACuB,IAAI,CAAC,MAAM,CAAC,CAAC,CAC/BhC,SAAS,CAACyB,iBAAiB,CAAC,CAAC,IAAI,CAACT,KAAK,CAACD,GAAG,CAAC,IAAI,CAACC,KAAK,CAACE,MAAM,CAAC,CAAC,EAC/D,IAAI,CAACgB,IAAI,CAAG,IAAI,CAACzB,KAAK,CAACuB,IAAI,CAAC,MAAM,CAAC,CACnChC,SAAS,CAACmC,cAAc,CAAC,CAAC,CACzB,CAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEAC,iBAAiBA,CAAA,CAAE,CACjB;AACH,GAAI,IAAI,CAAC3B,KAAK,CAACuB,IAAI,CAAC,MAAM,CAAC,CAAE,CAC5B,IAAI,CAACN,EAAE,CAACC,OAAO,CAACU,UAAU,CAAG,IAAI,CACjC,IAAI,CAACX,EAAE,CAACC,OAAO,CAACW,yBAAyB,CAAG,WAAW,CACvDnB,MAAM,CAACoB,mBAAmB,CAACC,OAAO,CAAG,IAAI,CACzC;AACA,IAAI,CAACd,EAAE,CAACC,OAAO,CAACc,gBAAgB,CAAC,OAAO,CAAG9B,GAAG,EAAK,CACjD;AACA,GAAIA,GAAG,CAAC+B,SAAS,GAAK,iBAAiB,CAAE,CAC1C;AACA;AACA;AACA/B,GAAG,CAACG,MAAM,CAAC6B,cAAc,CAAC,OAAO,CAAC,CACjC,CACF,CAAC,CAAC,CACC,CACH,CA+BAC,MAAMA,CAAA,CAAG,CACV,GAAI,IAAI,CAACnC,KAAK,CAACuB,IAAI,CAAC,MAAM,CAAC,CAAE,CAC1B,mBACE1B,KAAA,QAAKuC,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB1C,IAAA,OAAA0C,QAAA,CAAK,IAAI,CAACrC,KAAK,CAACuB,IAAI,CAAC,OAAO,CAAC,CAAK,CAAC,cACzC5B,IAAA,QAAK2C,KAAK,CAAC,WAAW,CAAAD,QAAA,cACrBxC,KAAA,QAAKyC,KAAK,CAAC,KAAK,CAAAD,QAAA,eACfxC,KAAA,QAAKyC,KAAK,CAAC,iBAAiB,CAAAD,QAAA,eAC3B1C,IAAA,eAAY4C,GAAG,CAAE,IAAI,CAACtB,EAAG,CAACuB,OAAO,CAAGtC,GAAG,EAAK,CAAC,IAAI,CAACD,UAAU,CAACC,GAAG,CAAC,EAAE,CAAAmC,QAAA,CAChE,IAAI,CAAC9B,KAAK,CAACH,KAAK,CACP,CAAC,cAEbP,KAAA,QAAKyC,KAAK,CAAC,0CAA0C,CAAAD,QAAA,eACnD1C,IAAA,UAAO2C,KAAK,CAAC,kBAAkB,CAACG,IAAI,CAAC,UAAU,CAACC,QAAQ,CAAEA,CAAA,GAAK,CAAC,IAAI,CAACvC,QAAQ,CAAC,CAACK,OAAO,CAAC,CAAC,IAAI,CAACD,KAAK,CAACC,OAAO,CAAC,CAAC,EAAE,CAACmC,OAAO,CAAE,IAAI,CAACpC,KAAK,CAACC,OAAQ,CAACoC,EAAE,CAAC,UAAU,CAAC,CAAC,cAC3JjD,IAAA,UAAO2C,KAAK,CAAC,kBAAkB,CAACO,GAAG,CAAC,UAAU,CAAAR,QAAA,CAAC,kBAE/C,CAAO,CAAC,EACL,CAAC,cACN1C,IAAA,QAAK2C,KAAK,CAAC,4CAA4C,CAAAD,QAAA,CAAE,IAAI,CAAC9B,KAAK,CAACD,GAAG,CAAM,CAAC,EAC1E,CAAC,cACNT,KAAA,QAAKyC,KAAK,CAAC,iBAAiB,CAAAD,QAAA,eAC3B1C,IAAA,OAAA0C,QAAA,CAAI,0BAAwB,CAAI,CAAC,cACjC1C,IAAA,OAAI2C,KAAK,CAAC,4CAA4C,CAACQ,uBAAuB,CAAE,CAAEC,MAAM,CAAE,IAAI,CAACxC,KAAK,CAACE,MAAO,CAAE,CAAE,CAAC,EAC7G,CAAC,EACF,CAAC,CACF,CAAC,cACNd,IAAA,WAAO,CAAC,EACC,CAAC,CAEV,CAAC,IAAM,CACN,mBAAOA,IAAA,SAAU,CAAC,CACnB,CACA,CACF,CAEA,cAAe,CAAAF,uBAAuB,CAACK,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}